import{t as j,_ as P}from"./HeaderFilter-CcH-CuSb.js";import{u as C,c as u,o as c,F as h,d as y,b as t,t as m,e as I,n as $,f as S,g as w,h as N,i as A,j as _,a as D,r as b,k as T,w as L,l as z,m as B}from"./index-C2oWWeN6.js";const F=[{id:1,author_id:10,title:"剩食問題",group:"一年忠班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:10,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}},post:[{id:111,user_id:10,title:"剩食狀況記錄",time:"1747028800",content:"每日午餐檢查剩食現況",likes:0,comment:[]}]},{id:2,title:"剩食問題",group:"一年孝班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:40,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}}},{id:3,title:"節約用水",group:"全校",startTime:"",endTime:"",types:[6],intro:"",progress:80,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}}},{id:4,title:"社區踏查",group:"",startTime:"",endTime:"",types:[2,3],intro:"",progress:50,thumbnail:"thumb2.jpg",description:"",stage:{0:{title:"行動規劃",startTime:"1746028800",endTime:"1748877600"},1:{title:"行動調查",startTime:"1748877600",endTime:"1749877600"},2:{title:"行動實施",startTime:"1749877600",endTime:"1753977600"},3:{title:"成果分享",startTime:"1752877600",endTime:"1753977600"}}}],E="/Xishi/assets/draw_wall-Bo3Y0JoO.jpg",U=["onClick"],q={class:"p-4 md:p-10 flex flex-col justify-center w-full md:flex-1 text-sm md:text-lg"},H={class:"text-xl md:text-2xl mb-2 md:mb-2"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-x-4"},J={class:"mb-2"},M={class:"text-md mb-2"},O={class:"text-md mb-2 md:col-span-2"},X={class:"flex items-center w-full md:w-70 gap-3 md:col-span-2"},Y={class:"relative flex-1 bg-gray-200 rounded-full h-2 overflow-hidden"},G={class:"w-10 text-sm text-gray-700 text-left"},K={class:"flex flex-wrap gap-2 mt-2 md:col-span-2"},Q={__name:"ActionCard",props:{filteredInfo:{type:Array,default:()=>[]}},setup(p){const g=C(),n=l=>l<40?"bg-red-500":l<70?"bg-yellow-400":"bg-green-500",a=l=>{g.push({name:"action-detail",params:{id:l}})};return(l,d)=>(c(),u("div",N(A(l.$attrs)),[(c(!0),u(h,null,y(p.filteredInfo,s=>(c(),u("div",{class:"bg-gradient-to-r from-gray-800/40 to-gray-400/20 backdrop-blur-sm animate-fade-in-up cursor-pointer w-full md:max-w-7xl md:max-h-95 rounded-xl hover:shadow-focus overflow-hidden flex flex-col md:flex-row hover:scale-105",key:s.id,onClick:f=>a(s.id)},[d[1]||(d[1]=t("div",{class:"w-full md:w-2/5 flex items-end justify-center md:justify-end"},[t("img",{src:E,alt:"Card Image",class:"w-full h-full object-cover object-center rounded-xl"})],-1)),t("div",q,[t("h2",H,"主題："+m(s.title),1),t("div",R,[t("p",J," 時間 ："+m(s.startTime&&s.endTime?new Date(s.startTime*1e3).toLocaleDateString()+" ~ "+new Date(s.endTime*1e3).toLocaleDateString():"無"),1),t("p",M,"成員："+m(s.group),1),t("p",O,"描述 ："+m(s.intro),1),t("div",X,[d[0]||(d[0]=I(" 進度： ",-1)),t("div",Y,[t("div",{class:S(["h-2 rounded-full transition-all duration-500",n(s.progress)]),style:$({width:s.progress+"%"})},null,6)]),t("span",G,m(s.progress)+"% ",1)]),t("div",K,[(c(!0),u(h,null,y(s.types,f=>(c(),u("span",{key:f,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},m(w(j)[f].title),1))),128))])])])],8,U))),128))],16))}},W={key:0,class:"text-base md:text-[1.6rem]"},Z=["disabled"],ee=["disabled"],te={__name:"PageLabel",props:{totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:6},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(p,{emit:g}){const n=p,a=g,l=_(()=>n.totalItems===0?1:Math.ceil(n.totalItems/n.itemsPerPage)),d=()=>{n.modelValue<l.value&&a("update:modelValue",n.modelValue+1)},s=()=>{n.modelValue>1&&a("update:modelValue",n.modelValue-1)};return(f,r)=>l.value>=1?(c(),u("div",W,[t("button",{onClick:s,disabled:p.modelValue===1,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 上一頁 ",8,Z),t("span",null,"第 "+m(p.modelValue)+" / "+m(l.value)+" 頁",1),t("button",{onClick:d,disabled:p.modelValue===l.value,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 下一頁 ",8,ee)])):D("",!0)}},se={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},ae={class:"container mx-auto flex items-center p-4"},le={class:"w-1/3"},re={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},ie={key:0,class:"text-center text-gray-500 mt-8"},v=3,de={__name:"Actions",setup(p){const g=B("handleAppScroll"),n=b(F),a=b({sdgs:[],time:"all",startDate:"",endDate:"",keyword:""}),l=b(1),d=r=>{a.value=r,l.value=1},s=_(()=>{let r=n.value;if(a.value.sdgs.length>0&&(r=r.filter(e=>e.types&&e.types.some(i=>a.value.sdgs.includes(i)))),a.value.time!=="all"){const e=new Date;let i,o;switch(a.value.time){case"day":o=new Date(e),i=new Date(e),i.setDate(e.getDate()-1);break;case"week":o=new Date(e),i=new Date(e),i.setDate(e.getDate()-7);break;case"custom":a.value.startDate&&a.value.endDate&&(i=new Date(a.value.startDate),i.setHours(0,0,0,0),o=new Date(a.value.endDate),o.setHours(23,59,59,999));break}i&&o&&(r=r.filter(x=>{if(!x.startTime||!x.endTime||!String(x.startTime).trim()||!String(x.endTime).trim())return!1;const k=new Date(Number(x.startTime)*1e3),V=new Date(Number(x.endTime)*1e3);return k<=o&&V>=i}))}return a.value.keyword&&(r=r.filter(e=>e.title.toLowerCase().includes(a.value.keyword.toLowerCase()))),r}),f=_(()=>{const r=(l.value-1)*v,e=r+v;return s.value.slice(r,e)});return(r,e)=>{const i=z("router-link");return c(),u("div",{class:"page-background content-scroller",onScroll:e[1]||(e[1]=(...o)=>w(g)&&w(g)(...o))},[t("header",se,[t("div",ae,[t("div",le,[T(i,{to:"/",class:"back-home-btn"},{default:L(()=>[...e[2]||(e[2]=[t("span",{class:"text"},"回首頁",-1),t("span",{class:"icon"},"←",-1)])]),_:1})]),e[3]||(e[3]=t("div",{class:"w-1/3 text-center"},[t("h1",{class:"text-2xl md:text-3xl font-bold"},"行動追蹤")],-1)),e[4]||(e[4]=t("div",{class:"w-1/3"},null,-1))])]),t("main",re,[T(P,{"onUpdate:filters":d,class:"flex flex-wrap justify-center items-center gap-4"}),T(Q,{filteredInfo:f.value,class:"flex flex-col gap-10 w-full md:px-0"},null,8,["filteredInfo"]),s.value.length===0?(c(),u("div",ie,[...e[5]||(e[5]=[t("p",null,"找不到符合條件的行動。",-1)])])):D("",!0),T(te,{class:"flex justify-center items-center gap-4 mt-8",totalItems:s.value.length,itemsPerPage:v,modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o)},null,8,["totalItems","modelValue"])])],32)}}};export{de as default};
