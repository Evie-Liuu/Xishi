import{_ as h}from"./HeaderFilter-CcH-CuSb.js";import{r as m,j as k,c as r,o as i,b as s,k as p,w as D,l as f,a as b,F as j,d as C,g as x,m as P,t as v}from"./index-C2oWWeN6.js";const S="/Xishi/assets/scene-BVdttXzO.jpg",V=[{id:1,title:"讀經教育",time:"1753977600",types:[4,3,9,15],intro:"全校讀論語 星期四讀經和鎮長。",img_url:"figure3.png",content:"全校讀論語 星期四讀經和鎮長。"},{id:2,title:"舞蹈社團",time:"1741977600",types:[4],intro:"精彩的舞蹈表演，獲得滿堂彩。",img_url:"figure2.png",content:"精彩的舞蹈表演，獲得滿堂彩。",comment:[{uuid:"10",author_uuid:"400",author:"小明",time:"",delete_time:null,text:"這篇文章真棒！",likes:5,liked:!1},{uuid:"11",author_uuid:"0",author:"我",time:"",delete_time:null,text:"寫得很好，學到很多。",likes:2,liked:!0}]},{id:3,title:"社區踏查",time:"1753907600",types:[11],intro:"",img_url:"",content:""},{id:4,title:"社區踏查",time:"",types:[11],intro:"",img_url:"figure1.png",content:""}],I={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},L={class:"container mx-auto flex items-center p-4"},B={class:"w-1/3"},F={class:"p-10 flex flex-col justify-center items-center gap-8"},N={class:"grid grid-cols-1 md:grid-cols-3 content-center justify-items-center gap-5 p-4 md:p-0"},U=["onClick"],z={class:"p-4 flex flex-col justify-center"},A={class:"text-xl font-bold mb-2"},H={class:"text-gray-600 text-sm"},X={key:0,class:"text-center text-gray-500 mt-8"},$=6,W={__name:"Story",setup(E){const g=P("handleAppScroll"),_=m(V),l=m({sdgs:[],time:"all",startDate:"",endDate:"",keyword:""}),d=m(1),y=n=>{l.value=n,d.value=1},u=k(()=>{let n=_.value;if(l.value.sdgs.length>0&&(n=n.filter(e=>e.types&&e.types.some(a=>l.value.sdgs.includes(a)))),l.value.time!=="all"){const e=new Date;n=n.filter(a=>{if(!a.time||String(a.time).trim()==="")return!1;const o=new Date(Number(a.time)*1e3);if(l.value.time==="day"){const t=new Date;return t.setDate(e.getDate()-1),o>=t}else if(l.value.time==="week"){const t=new Date;return t.setDate(e.getDate()-7),o>=t}else if(l.value.time==="custom"&&l.value.startDate&&l.value.endDate){const t=new Date(l.value.startDate);t.setHours(0,0,0,0);const c=new Date(l.value.endDate);return c.setHours(23,59,59,999),o>=t&&o<=c}return!0})}return l.value.keyword&&(n=n.filter(e=>e.title.toLowerCase().includes(l.value.keyword.toLowerCase()))),n}),w=n=>{};return(n,e)=>{const a=f("router-link"),o=f("PageLabel");return i(),r("div",{class:"page-background content-scroller h-screen flex flex-col",onScroll:e[1]||(e[1]=(...t)=>x(g)&&x(g)(...t))},[s("header",I,[s("div",L,[s("div",B,[p(a,{to:"/sdgs",class:"back-home-btn"},{default:D(()=>[...e[2]||(e[2]=[s("span",{class:"text"},"回上頁",-1),s("span",{class:"icon"},"←",-1)])]),_:1})]),e[3]||(e[3]=s("div",{class:"w-1/3 text-center"},[s("h1",{class:"text-2xl md:text-3xl font-bold"},"故事牆")],-1)),e[4]||(e[4]=s("div",{class:"w-1/3 flex items-center justify-end pr-4 gap-2"},null,-1))])]),s("main",F,[p(h,{"onUpdate:filters":y,class:"flex flex-wrap justify-center items-center gap-4 md:px-50"}),s("section",N,[(i(!0),r(j,null,C(u.value,t=>(i(),r("div",{class:"animate-fade-in-up cursor-pointer w-80 min-h-80 bg-white rounded-xl shadow-md overflow-hidden flex flex-col gap-5 hover:scale-105",key:t.id,onClick:c=>w(t.id)},[e[6]||(e[6]=s("img",{src:S,alt:"Card Image",class:"h-45 object-cover"},null,-1)),s("div",z,[s("h2",A,v(t.title),1),s("p",H,v(t.intro),1),e[5]||(e[5]=s("p",{class:"text-gray-600 text-sm text-right pe-3"},"更多",-1))])],8,U))),128))]),u.value.length===0?(i(),r("div",X,[...e[7]||(e[7]=[s("p",null,"找不到符合條件的行動。",-1)])])):b("",!0),p(o,{class:"flex justify-center items-center gap-4 mt-8",totalItems:u.value.length,itemsPerPage:$,modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t)},null,8,["totalItems","modelValue"])])],32)}}};export{W as default};
